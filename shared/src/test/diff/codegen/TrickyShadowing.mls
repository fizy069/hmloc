
:js
class A: {}
A
A = 2
//│ Defined class A
//│ // Prelude
//│ let res;
//│ class A {}
//│ // Query 1
//│ res = ((x) => new A(x));
//│ // Query 2
//│ globalThis.A1 = 2;
//│ // End of generated code
//│ res: anything -> A
//│    = [Function: res]
//│ A: 2
//│  = 2

A
//│ res: 2
//│    = 2

:e
:js
class add
//│ Defined class add
//│ // Prelude
//│ class add1 {}
//│ // End of generated code


add
//│ /!!!\ Uncaught error: java.util.NoSuchElementException: key not found: Add
//│ 	at: scala.collection.immutable.BitmapIndexedMapNode.apply(HashMap.scala:635)
//│ 	at: scala.collection.immutable.HashMap.apply(HashMap.scala:132)
//│ 	at: mlscript.TypeSimplifier.$anonfun$normalizeTypes_$bang$10(TypeSimplifier.scala:147)
//│ 	at: mlscript.NormalForms$Conjunct.toTypeWith(NormalForms.scala:274)
//│ 	at: mlscript.TypeSimplifier.$anonfun$normalizeTypes_$bang$7(TypeSimplifier.scala:270)
//│ 	at: scala.collection.immutable.List.map(List.scala:246)
//│ 	at: mlscript.TypeSimplifier.helper$1(TypeSimplifier.scala:118)
//│ 	at: mlscript.TypeSimplifier.$anonfun$normalizeTypes_$bang$78(TypeSimplifier.scala:277)
//│ 	at: mlscript.TyperHelpers.trace(TyperHelpers.scala:30)
//│ 	at: mlscript.TypeSimplifier.go$1(TypeSimplifier.scala:283)

add = 2
//│ add: 2
//│    = 2

add
//│ res: 2
//│    = 2


Test = 1
//│ Test: 1
//│     = 1

class Test
//│ Defined class Test

:js
x = Test
//│ // Query 1
//│ globalThis.x = function x(x) {
//│   return new Test1(x);
//│ };
//│ // End of generated code
//│ x: anything -> Test
//│  = [Function: x]

x 1
//│ res: Test
//│    = Test1 {}



class Test2
//│ Defined class Test2

:js
x = Test2
//│ // Query 1
//│ globalThis.x1 = function x1(x) {
//│   return new Test2(x);
//│ };
//│ // End of generated code
//│ x: anything -> Test2
//│  = [Function: x1]

:js
type B = Test2
//│ Defined type alias B
//│ // End of generated code

:e
:ge
:js
class C: B
//│ ╔══[ERROR] cannot inherit from a type alias
//│ ║  l.99: 	class C: B
//│ ╙──      	      ^^^^
//│ Code generation encountered an error:
//│   cannot inherit from type alias B


:js
B = 1
//│ // Query 1
//│ globalThis.B = 1;
//│ // End of generated code
//│ B: 1
//│  = 1



:js
def f: int
// def f = 1
//│ // Query 1 is empty
//│ // End of generated code
//│ f: int
//│  = <missing implementation>

:js
def f = 2
def f = 3
//│ // Query 1
//│ globalThis.f = function f() {
//│   return 2;
//│ };
//│ // Query 2
//│ globalThis.f1 = function f1() {
//│   return 3;
//│ };
//│ // End of generated code
//│ 2
//│   <:  f:
//│ int
//│  = [Function: f]
//│ 3
//│   <:  f:
//│ int
//│  = [Function: f1]

f
//│ res: int
//│    = 3

g = 1
//│ g: 1
//│  = 1

h = g
//│ h: 1
//│  = 1

def g: string
//│ g: string
//│  = <missing implementation>

:js
g = "a"
//│ // Query 1
//│ globalThis.g1 = "a";
//│ // End of generated code
//│ "a"
//│   <:  g:
//│ string
//│  = 'a'

def h: int
//│ h: int
//│  = <missing implementation>

h
//│ res: int
//│    = <no result>
//│      h is not implemented

:js
i = 1
def i: string
i = "a"
//│ // Query 1
//│ globalThis.i = 1;
//│ // Query 2 is empty
//│ // Query 3
//│ globalThis.i1 = "a";
//│ // End of generated code
//│ i: 1
//│  = 1
//│ i: string
//│  = <missing implementation>
//│ "a"
//│   <:  i:
//│ string
//│  = 'a'

i
//│ res: string
//│    = 'a'


class C1
//│ Defined class C1

:js
C1 = "a"
//│ // Query 1
//│ globalThis.C11 = "a";
//│ // End of generated code
//│ C1: "a"
//│   = 'a'

:js
class C2: C1
//│ Defined class C2
//│ // Prelude
//│ class C2 extends C1 {
//│   constructor(fields) {
//│     super(fields);
//│   }
//│ }
//│ // End of generated code



type Lol = 1
//│ Defined type alias Lol

:e
:ge
:js
Lol
//│ ╔══[ERROR] identifier not found: Lol
//│ ║  l.235: 	Lol
//│ ╙──       	^^^
//│ res: error
//│ Code generation encountered an error:
//│   type alias Lol is not a valid expression



